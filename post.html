<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=0.5, maximum-scale=3, user-scalable=yes">
  <title>Blog Post</title>
  <!-- Multilingual font support: Arabic, Latin, etc. -->
  <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cairo:wght@400;700&family=Noto+Sans:wght@400;700&family=Noto+Sans+Arabic:wght@400;700&family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
  <style>
    body[dir="rtl"], html[dir="rtl"] {
      direction: rtl;
      font-family: 'Tajawal', 'Amiri', 'Noto Sans Arabic', 'Cairo', 'Noto Sans', 'Inter', 'Playfair Display', sans-serif;
    }
    .rtl {
      direction: rtl;
      text-align: right;
      font-family: 'Tajawal', 'Amiri', 'Noto Sans Arabic', 'Cairo', 'Noto Sans', 'Inter', 'Playfair Display', sans-serif;
    }
    body, html {
      font-family: 'Noto Sans', 'Inter', 'Playfair Display', 'Cairo', 'Noto Sans Arabic', 'Tajawal', 'Amiri', sans-serif;
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <link rel="stylesheet" href="css/post.css">
</head>
<body>
  <div id="progressContainer" aria-hidden="true"><div id="progressBar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"></div></div>
  <div class="post-container">
    <button class="back-btn" id="backBtn" aria-label="Go back" title="Back">←</button>
    <div class="post-banner"><img class="banner-img" src="https://raw.githubusercontent.com/Sou1lah/Personal-Blog/main/assets/ImagePlaceholder.jpg" alt="Banner"></div>
    <header class="post-header">
        <h1 id="postTitle">
          <span id="postTitleLoader" class="title-loader"></span>
          <span id="postTitleText" style="display:none;">Post Title</span>
        </h1>
      <div class="post-meta">
        <p id="postDate">Date</p>
        <p id="postSource" class="post-source" style="margin-top:6px; font-size:0.95rem; color: rgba(0,0,0,0.6); display:none;"></p>
        <br>
      </div>
      <div class="header-divider"></div>
    </header>
    <div id="postContent" class="post-body" style="display:none;"></div>
    <button id="goTopBtn" aria-label="Go to top" title="Go to top">↑</button>
  </div>
  <div id="imgZoomOverlay" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.85);z-index:3000;align-items:center;justify-content:center;cursor:zoom-out;"></div>


  <!-- Optional injected config (created by CI from GitHub Actions secret) -->
  <script src="config.js"></script>
  <script src="js/post.js"></script>
  <script>
    // Simple Arabic detection and RTL switch for post content and title
    function isArabic(text) {
      return /[\u0600-\u06FF]/.test(text);
    }
    document.addEventListener('DOMContentLoaded', function() {
      // Check if post content is Arabic and switch to RTL if needed
      const postContent = document.getElementById('postContent');
      if (postContent) {
        const observer = new MutationObserver(() => {
          if (isArabic(postContent.textContent)) {
            postContent.classList.add('rtl');
          } else {
            postContent.classList.remove('rtl');
          }
        });
        observer.observe(postContent, { childList: true, subtree: true });
      }
      // Check if post title is Arabic and align right with Arabic font
      const postTitleText = document.getElementById('postTitleText');
      if (postTitleText) {
        const updateTitleDir = () => {
          if (isArabic(postTitleText.textContent)) {
            postTitleText.style.textAlign = 'right';
            postTitleText.style.fontFamily = "'Tajawal', 'Amiri', 'Noto Sans Arabic', 'Cairo', 'Noto Sans', 'Inter', 'Playfair Display', sans-serif";
          } else {
            postTitleText.style.textAlign = '';
            postTitleText.style.fontFamily = '';
          }
        };
        // Run on load and whenever the title changes
        updateTitleDir();
        const titleObserver = new MutationObserver(updateTitleDir);
        titleObserver.observe(postTitleText, { childList: true, subtree: true, characterData: true });
      }
      // Optionally, set the whole page to RTL if most content is Arabic
      const bodyText = document.body.textContent;
      if (isArabic(bodyText)) {
        document.documentElement.setAttribute('dir', 'rtl');
      }
    });
  </script>
</body>
</html>
